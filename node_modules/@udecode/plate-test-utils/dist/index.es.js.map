{"version":3,"file":"index.es.js","sources":["../src/getHtmlDocument.ts","../src/hyperscript/tokens.ts","../src/hyperscript/creators.ts","../src/jsx.ts","../src/createDataTransfer.ts"],"sourcesContent":["export const getHtmlDocument = (html: string) =>\n  new DOMParser().parseFromString(html, 'text/html');\n","// eslint-disable-next-line max-classes-per-file\nimport { Node, Path, Text } from 'slate';\n\n/**\n * A weak map to hold anchor tokens.\n */\n\nconst ANCHOR: WeakMap<Node, [number, AnchorToken]> = new WeakMap();\n\n/**\n * A weak map to hold focus tokens.\n */\n\nconst FOCUS: WeakMap<Node, [number, FocusToken]> = new WeakMap();\n\n/**\n * All tokens inherit from a single constructor for `instanceof` checking.\n */\n\nexport class Token {}\n\n/**\n * Anchor tokens represent the selection's anchor point.\n */\n\nexport class AnchorToken extends Token {\n  offset?: number;\n  path?: Path;\n\n  constructor(\n    props: {\n      offset?: number;\n      path?: Path;\n    } = {}\n  ) {\n    super();\n    const { offset, path } = props;\n    this.offset = offset;\n    this.path = path;\n  }\n}\n\n/**\n * Focus tokens represent the selection's focus point.\n */\n\nexport class FocusToken extends Token {\n  offset?: number;\n  path?: Path;\n\n  constructor(\n    props: {\n      offset?: number;\n      path?: Path;\n    } = {}\n  ) {\n    super();\n    const { offset, path } = props;\n    this.offset = offset;\n    this.path = path;\n  }\n}\n\n/**\n * Add an anchor token to the end of a text node.\n */\n\nexport const addAnchorToken = (text: Text, token: AnchorToken) => {\n  const offset = text.text.length;\n  ANCHOR.set(text, [offset, token]);\n};\n\n/**\n * Get the offset if a text node has an associated anchor token.\n */\n\nexport const getAnchorOffset = (\n  text: Text\n): [number, AnchorToken] | undefined => {\n  return ANCHOR.get(text);\n};\n\n/**\n * Add a focus token to the end of a text node.\n */\n\nexport const addFocusToken = (text: Text, token: FocusToken) => {\n  const offset = text.text.length;\n  FOCUS.set(text, [offset, token]);\n};\n\n/**\n * Get the offset if a text node has an associated focus token.\n */\n\nexport const getFocusOffset = (\n  text: Text\n): [number, FocusToken] | undefined => {\n  return FOCUS.get(text);\n};\n","import {\n  createEditor as makeEditor,\n  Descendant,\n  Editor,\n  Element,\n  Node,\n  Range,\n  Text,\n} from 'slate';\nimport {\n  addAnchorToken,\n  addFocusToken,\n  AnchorToken,\n  FocusToken,\n  getAnchorOffset,\n  getFocusOffset,\n  Token,\n} from './tokens';\n\n/**\n * Resolve the descedants of a node by normalizing the children that can be\n * passed into a hyperscript creator function.\n */\n\nconst STRINGS: WeakSet<Text> = new WeakSet();\n\nconst resolveDescendants = (children: any[]): Descendant[] => {\n  const nodes: Node[] = [];\n\n  const addChild = (child: Node | Token): void => {\n    if (child == null) {\n      return;\n    }\n\n    const prev = nodes[nodes.length - 1];\n\n    if (typeof child === 'string') {\n      const text = { text: child };\n      STRINGS.add(text);\n      child = text;\n    }\n\n    if (Text.isText(child)) {\n      const c = child; // HACK: fix typescript complaining\n\n      if (\n        Text.isText(prev) &&\n        STRINGS.has(prev) &&\n        STRINGS.has(c) &&\n        Text.equals(prev, c, { loose: true })\n      ) {\n        prev.text += c.text;\n      } else {\n        nodes.push(c);\n      }\n    } else if (Element.isElement(child)) {\n      nodes.push(child);\n    } else if (child instanceof Token) {\n      let n = nodes[nodes.length - 1];\n\n      if (!Text.isText(n)) {\n        addChild('');\n        n = nodes[nodes.length - 1] as Text;\n      }\n\n      if (child instanceof AnchorToken) {\n        addAnchorToken(n, child);\n      } else if (child instanceof FocusToken) {\n        addFocusToken(n, child);\n      }\n    } else {\n      throw new Error(`Unexpected hyperscript child object: ${child}`);\n    }\n  };\n\n  for (const child of children.flat(Infinity)) {\n    addChild(child);\n  }\n\n  return nodes;\n};\n\n/**\n * Create an anchor token.\n */\n\nexport function createAnchor(\n  tagName: string,\n  attributes: { [key: string]: any }\n): AnchorToken {\n  return new AnchorToken(attributes);\n}\n\n/**\n * Create an anchor and a focus token.\n */\n\nexport function createCursor(\n  tagName: string,\n  attributes: { [key: string]: any }\n): Token[] {\n  return [new AnchorToken(attributes), new FocusToken(attributes)];\n}\n\n/**\n * Create an `Element` object.\n */\n\nexport function createElement(\n  tagName: string,\n  attributes: { [key: string]: any },\n  children: any[]\n): Element {\n  return { ...attributes, children: resolveDescendants(children) };\n}\n\n/**\n * Create a focus token.\n */\n\nexport function createFocus(\n  tagName: string,\n  attributes: { [key: string]: any }\n): FocusToken {\n  return new FocusToken(attributes);\n}\n\n/**\n * Create a fragment.\n */\n\nexport function createFragment(\n  tagName: string,\n  attributes: { [key: string]: any },\n  children: any[]\n): Descendant[] {\n  return resolveDescendants(children);\n}\n\n/**\n * Create a `Selection` object.\n */\n\nexport function createSelection(\n  tagName: string,\n  attributes: { [key: string]: any },\n  children: any[]\n): Range {\n  const anchor: AnchorToken = children.find((c) => c instanceof AnchorToken);\n  const focus: FocusToken = children.find((c) => c instanceof FocusToken);\n\n  if (!anchor || !anchor.offset || !anchor.path) {\n    throw new Error(\n      `The <selection> hyperscript tag must have an <anchor> tag as a child with \\`path\\` and \\`offset\\` attributes defined.`\n    );\n  }\n\n  if (!focus || !focus.offset || !focus.path) {\n    throw new Error(\n      `The <selection> hyperscript tag must have a <focus> tag as a child with \\`path\\` and \\`offset\\` attributes defined.`\n    );\n  }\n\n  return {\n    anchor: {\n      offset: anchor.offset,\n      path: anchor.path,\n    },\n    focus: {\n      offset: focus.offset,\n      path: focus.path,\n    },\n    ...attributes,\n  };\n}\n\n/**\n * Create a `Text` object.\n */\n\nexport function createText(\n  tagName: string,\n  attributes: { [key: string]: any },\n  children: any[]\n): Text {\n  const nodes = resolveDescendants(children);\n\n  if (nodes.length > 1) {\n    throw new Error(\n      `The <text> hyperscript tag must only contain a single node's worth of children.`\n    );\n  }\n\n  let [node] = nodes;\n\n  if (node == null) {\n    node = { text: '' };\n  }\n\n  if (!Text.isText(node)) {\n    throw new Error(`\n    The <text> hyperscript tag can only contain text content as children.`);\n  }\n\n  // COMPAT: If they used the <text> tag we want to guarantee that it won't be\n  // merge with other string children.\n  STRINGS.delete(node);\n\n  Object.assign(node, attributes);\n  return node;\n}\n\n/**\n * Create a top-level `Editor` object.\n */\n\nexport function createEditor(\n  tagName: string,\n  attributes: { [key: string]: any },\n  children: any[]\n): Editor {\n  const otherChildren: any[] = [];\n  let selectionChild: Range | undefined;\n\n  for (const child of children) {\n    if (Range.isRange(child)) {\n      selectionChild = child;\n    } else {\n      otherChildren.push(child);\n    }\n  }\n\n  const descendants = resolveDescendants(otherChildren);\n  const selection: Partial<Range> = {};\n  const editor = makeEditor();\n  Object.assign(editor, attributes);\n  editor.children = descendants;\n\n  // Search the document's texts to see if any of them have tokens associated\n  // that need incorporated into the selection.\n  for (const [node, path] of Node.texts(editor)) {\n    const anchor = getAnchorOffset(node);\n    const focus = getFocusOffset(node);\n\n    if (anchor != null) {\n      const [offset] = anchor;\n      selection.anchor = { path, offset };\n    }\n\n    if (focus != null) {\n      const [offset] = focus;\n      selection.focus = { path, offset };\n    }\n  }\n\n  if (selection.anchor && !selection.focus) {\n    throw new Error(\n      `Slate hyperscript ranges must have both \\`<anchor />\\` and \\`<focus />\\` defined if one is defined, but you only defined \\`<anchor />\\`. For collapsed selections, use \\`<cursor />\\` instead.`\n    );\n  }\n\n  if (!selection.anchor && selection.focus) {\n    throw new Error(\n      `Slate hyperscript ranges must have both \\`<anchor />\\` and \\`<focus />\\` defined if one is defined, but you only defined \\`<focus />\\`. For collapsed selections, use \\`<cursor />\\` instead.`\n    );\n  }\n\n  if (selectionChild != null) {\n    editor.selection = selectionChild;\n  } else if (Range.isRange(selection)) {\n    editor.selection = selection;\n  }\n\n  return editor;\n}\n","/* eslint-disable prettier/prettier */\n// @ts-ignore\nimport { createHyperscript, createText as createTestText } from \"slate-hyperscript\";\nimport { HyperscriptShorthands } from \"slate-hyperscript/dist/hyperscript\";\nimport { createText } from \"./hyperscript/creators\";\n\ndeclare global {\n  namespace JSX {\n    interface IntrinsicElements {\n      [key: string]: any;\n\n      anchor: any;\n      cursor: any;\n      editor: any;\n      element: any;\n      focus: any;\n      fragment: any;\n      selection: any;\n      htext: {\n        [key: string]: any;\n        // These optional params will show up in the autocomplete!\n        bold?: boolean;\n        underline?: boolean;\n        italic?: boolean;\n        code?: boolean;\n        children?: any;\n      };\n      hp: any;\n      hul: any;\n      hol: any;\n      hli: any;\n    }\n  }\n}\n\nconst voidChildren = [{ text: '' }];\n\nconst ELEMENT_BLOCKQUOTE = 'blockquote';\nconst ELEMENT_CODE_BLOCK = 'code_block';\nconst ELEMENT_CODE_LINE = 'code_line';\nconst ELEMENT_EXCALIDRAW = 'excalidraw';\nconst ELEMENT_H1 = 'h1';\nconst ELEMENT_H2 = 'h2';\nconst ELEMENT_H3 = 'h3';\nconst ELEMENT_H4 = 'h4';\nconst ELEMENT_H5 = 'h5';\nconst ELEMENT_H6 = 'h6';\nconst ELEMENT_IMAGE = 'img';\nconst ELEMENT_LI = 'li';\nconst ELEMENT_LIC = 'lic';\nconst ELEMENT_LINK = 'a';\nconst ELEMENT_MEDIA_EMBED = 'media_embed';\nconst ELEMENT_MENTION = 'mention';\nconst ELEMENT_MENTION_INPUT = 'mention_input';\nconst ELEMENT_OL = 'ol';\nconst ELEMENT_PARAGRAPH = 'p';\nconst ELEMENT_TABLE = 'table';\nconst ELEMENT_TD = 'td';\nconst ELEMENT_TH = 'th';\nconst ELEMENT_TODO_LI = 'action_item';\nconst ELEMENT_TR = 'tr';\nconst ELEMENT_UL = 'ul';\n\nconst elements: HyperscriptShorthands = {\n  ha: { type: ELEMENT_LINK },\n  hblockquote: { type: ELEMENT_BLOCKQUOTE },\n  hcodeblock: { type: ELEMENT_CODE_BLOCK },\n  hcodeline: { type: ELEMENT_CODE_LINE },\n  hdefault: { type: ELEMENT_PARAGRAPH },\n  hexcalidraw: { type: ELEMENT_EXCALIDRAW },\n  hh1: { type: ELEMENT_H1 },\n  hh2: { type: ELEMENT_H2 },\n  hh3: { type: ELEMENT_H3 },\n  hh4: { type: ELEMENT_H4 },\n  hh5: { type: ELEMENT_H5 },\n  hh6: { type: ELEMENT_H6 },\n  himg: { type: ELEMENT_IMAGE, children: voidChildren },\n  hli: { type: ELEMENT_LI },\n  hlic: { type: ELEMENT_LIC },\n  hmediaembed: { type: ELEMENT_MEDIA_EMBED, children: voidChildren },\n  hmention: { type: ELEMENT_MENTION, children: voidChildren },\n  hmentioninput: { type: ELEMENT_MENTION_INPUT, children: voidChildren },\n  hol: { type: ELEMENT_OL },\n  hp: { type: ELEMENT_PARAGRAPH },\n  htable: { type: ELEMENT_TABLE },\n  htd: { type: ELEMENT_TD },\n  hth: { type: ELEMENT_TH },\n  htodoli: { type: ELEMENT_TODO_LI },\n  htr: { type: ELEMENT_TR },\n  hul: { type: ELEMENT_UL },\n};\n\nexport const jsx = createHyperscript({\n  elements,\n  creators: {\n    htext: createTestText,\n  },\n});\n\nexport const hjsx = createHyperscript({\n  elements,\n  creators: {\n    htext: createText,\n  },\n});\n","export type DataTransferDataType = 'text/plain' | 'text/html' | string;\n\nexport type DataTransferDataMap = Map<DataTransferDataType, unknown>;\n\nexport const createDataTransfer = (dataMap: DataTransferDataMap = new Map()) =>\n  (({\n    getData: (type: string) => dataMap.get(type) ?? '',\n    setData: (type: string, value: string) => dataMap.set(type, value),\n  } as unknown) as DataTransfer);\n"],"names":["getHtmlDocument","html","DOMParser","parseFromString","ANCHOR","WeakMap","FOCUS","Token","AnchorToken","constructor","props","offset","path","FocusToken","addAnchorToken","text","token","length","set","getAnchorOffset","get","addFocusToken","getFocusOffset","STRINGS","WeakSet","resolveDescendants","children","nodes","addChild","child","prev","add","Text","isText","c","has","equals","loose","push","Element","isElement","n","Error","flat","Infinity","createAnchor","tagName","attributes","createCursor","createElement","createFocus","createFragment","createSelection","anchor","find","focus","createText","node","delete","Object","assign","createEditor","otherChildren","selectionChild","Range","isRange","descendants","selection","editor","makeEditor","Node","texts","voidChildren","ELEMENT_BLOCKQUOTE","ELEMENT_CODE_BLOCK","ELEMENT_CODE_LINE","ELEMENT_EXCALIDRAW","ELEMENT_H1","ELEMENT_H2","ELEMENT_H3","ELEMENT_H4","ELEMENT_H5","ELEMENT_H6","ELEMENT_IMAGE","ELEMENT_LI","ELEMENT_LIC","ELEMENT_LINK","ELEMENT_MEDIA_EMBED","ELEMENT_MENTION","ELEMENT_MENTION_INPUT","ELEMENT_OL","ELEMENT_PARAGRAPH","ELEMENT_TABLE","ELEMENT_TD","ELEMENT_TH","ELEMENT_TODO_LI","ELEMENT_TR","ELEMENT_UL","elements","ha","type","hblockquote","hcodeblock","hcodeline","hdefault","hexcalidraw","hh1","hh2","hh3","hh4","hh5","hh6","himg","hli","hlic","hmediaembed","hmention","hmentioninput","hol","hp","htable","htd","hth","htodoli","htr","hul","jsx","createHyperscript","creators","htext","createTestText","hjsx","createDataTransfer","dataMap","Map","getData","setData","value"],"mappings":"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"}